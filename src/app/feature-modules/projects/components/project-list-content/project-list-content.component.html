<div class="mat-elevation-z8">
  @if (isLoading) {
    <div class="example-loading-shade">
      @if (isLoading) {
        <mat-spinner></mat-spinner>
      }
    </div>
  }

  <div class="example-table-container">
    <table>
      <tr>
        <th>Project Id</th>
        <th>Marker Symbol(s)</th>
        <th>MGI</th>
        <th>Intention</th>
        <th>Best Human ortholog</th>
        <th>Work Unit(s)</th>
        <th>Work Group(s)</th>
        <th>Project Assignment</th>
        <th>Summary Status</th>
        <th>Colony Name</th>
        <th>Phenotyping External Reference</th>
        <th>Privacy</th>
        <th>Consortia</th>
      </tr>
      @for (project of dataSource; track project) {
        <tr>
          <td>
            <a routerLink="/projects/{{ project.tpn }}">{{ project.tpn }}</a>
          </td>
          <td>
            @for (intention of project.projectIntentions; track intention) {
              <div>
                @if (intention.intentionByGene) {
                  <div>
                    <a href="{{intention.intentionByGene.gene.externalLink}}"
                    target="_blank">{{ intention.intentionByGene.gene.symbol }}</a>
                  </div>
                }
              </div>
            }
          </td>
          <td>
            @for (intention of project.projectIntentions; track intention) {
              <div>
                @if (intention.intentionByGene) {
                  <div>
                    <a href="{{intention.intentionByGene.gene.externalLink}}"
                    target="_blank">{{ intention.intentionByGene.gene.accessionId }}</a>
                  </div>
                }
              </div>
            }
          </td>
          <td>
            @for (intention of project.projectIntentions; track intention) {
              <div>
                {{ intention.molecularMutationTypeName }}
              </div>
            }
          </td>
          <td>
            @for (intention of project.projectIntentions; track intention) {
              <div>
                @for (ortholog of intention.intentionByGene.bestOrthologs; track ortholog) {
                  <div>
                    <a href="{{ ortholog.link }}" target="_blank">{{ ortholog.symbol }}</a>
                  </div>
                }
              </div>
            }
          </td>
          <td>
            @for (workUnitName of project.relatedWorkUnitNames; track workUnitName) {
              <div>
                {{ workUnitName }}
              </div>
            }
          </td>
          <td>
            @for (workGroupName of project.relatedWorkGroupNames; track workGroupName) {
              <div>
                {{ workGroupName }}
              </div>
            }
          </td>
          <td>
            {{ project.assignmentStatusName }}
          </td>
          <td>
            {{ project.summaryStatusName }}
          </td>
          <td>
            @for (colonyName of project.colonyNames; track colonyName) {
              <div>
                {{ colonyName }}
              </div>
            }
          </td>
          <td>
            @for (phenotypingExternalRef of project.phenotypingExternalRefs; track phenotypingExternalRef) {
              <div>
                {{ phenotypingExternalRef }}
              </div>
            }
          </td>
          <td>
            {{ project.privacyName }}
          </td>
          <td>
            @for (consortium of project.consortia; track consortium) {
              <div>
                {{ consortium.consortiumName}}
              </div>
            }
          </td>
        </tr>
      }
    </table>
  </div>
  <mat-paginator
    (page)="onPaginatorChanged(this.paginator)"
    [length]="page.totalElements"
    [pageSize]="page.size"
    [pageSizeOptions]="[10,20,50,100,200]"
    id="server">
  </mat-paginator>
</div>
